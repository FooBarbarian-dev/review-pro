[project]
name = "review-pro"
version = "0.1.0"
description = "Multi-tenant security analysis platform with SARIF support"
channels = ["conda-forge"]
platforms = ["linux-64"]

[tasks]
# Development server
runserver = "cd backend && python manage.py runserver"
shell = "cd backend && python manage.py shell"

# Database management
migrate = "cd backend && python manage.py migrate"
makemigrations = "cd backend && python manage.py makemigrations"
createsuperuser = "cd backend && python manage.py createsuperuser"

# Testing
test = "cd backend && pytest"
test-unit = "cd backend && pytest -m unit"
test-cov = "cd backend && pytest --cov=apps --cov-report=html --cov-report=term"
test-verbose = "cd backend && pytest -vv"

# Code quality
format = "cd backend && black . && isort ."
lint = "cd backend && flake8"
typecheck = "cd backend && mypy ."

# Celery workers
celery-worker = "cd backend && celery -A config worker -l info"
celery-beat = "cd backend && celery -A config beat -l info"
celery-all = "cd backend && celery -A config worker --beat -l info"

# Development utilities
check = { depends_on = ["format", "lint", "test"] }

[dependencies]
python = "3.11.*"
# Core Django
django = "5.0.*"
djangorestframework = "3.14.*"
django-cors-headers = "4.3.*"
django-environ = "0.11.*"

# Database
psycopg2 = "2.9.*"

# Authentication & Authorization
djangorestframework-simplejwt = "5.3.*"
pyjwt = "2.8.*"
social-auth-app-django = "5.4.*"
social-auth-core = "4.5.*"

# Caching & Pub/Sub
redis-py = "5.0.*"
django-redis = "5.4.*"
hiredis = "2.3.*"

# Object Storage (S3/MinIO)
boto3 = "1.34.*"
django-storages = "1.14.*"

# Task Queue
celery = "5.3.*"

# API Documentation
drf-spectacular = "0.27.*"

# Security & Rate Limiting
django-ratelimit = "4.1.*"
django-axes = "6.1.*"

# Monitoring & Logging
sentry-sdk = "1.39.*"
python-json-logger = "2.0.*"

# GitHub Integration
pygithub = "2.1.*"
cryptography = "42.0.*"

# Utilities
python-dateutil = "2.8.*"
pytz = "2024.1"
requests = "2.31.*"
urllib3 = "2.1.*"

# Development & Testing
pytest = "7.4.*"
pytest-django = "4.7.*"
pytest-cov = "4.1.*"
pytest-mock = "3.12.*"
factory-boy = "3.3.*"
faker = "22.0.*"
black = "24.1.*"
flake8 = "7.0.*"
isort = "5.13.*"
mypy = "1.8.*"

# WSGI Server
gunicorn = "21.2.*"
uvicorn = "0.27.*"

[pypi-dependencies]
# Packages not available in conda-forge
django-postgres-extra = "2.0.8"
sarif-om = "1.0.4"
django-stubs = "4.2.7"
djangorestframework-stubs = "3.14.5"

[feature.dev.dependencies]
ipython = "*"
ipdb = "*"

[environments]
default = ["dev"]
